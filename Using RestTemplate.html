
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>使用 RestTemplate 调用 RESTful 接口 · Spring Boot</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Jverson <i@jverson.com>">
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-disqus/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-page-toc-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="JavaMailSender.html" />
    
    
    <link rel="prev" href="Spring Conditional Annotation.html" />
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"buttons":[{"user":"jiwenxing","repo":"spring-boot-demo","type":"star","size":"small","count":true},{"user":"jiwenxing","repo":"spring-boot-demo","type":"fork","size":"small","count":true}]};
    </script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://jverson.com" target="_blank" class="custom-link">Jverson's Blog</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        <li class="header">Basic</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                        <b>1.1.</b>
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Why Spring Boot.html">
            
                <a href="Why Spring Boot.html">
            
                    
                        <b>1.2.</b>
                    
                    为什么要使用 Spring Boot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Getting Started.html">
            
                <a href="Getting Started.html">
            
                    
                        <b>1.3.</b>
                    
                    使用 Spring Boot 快速搭建工程实现 Hello World
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Using Spring Boot.html">
            
                <a href="Using Spring Boot.html">
            
                    
                        <b>1.4.</b>
                    
                    依赖管理、代码结构、配置类及热交换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="Customizing the Banner.html">
            
                <a href="Customizing the Banner.html">
            
                    
                        <b>1.5.</b>
                    
                    如何定制 Banner
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="Bean Configuration by Properties Files.html">
            
                <a href="Bean Configuration by Properties Files.html">
            
                    
                        <b>1.6.</b>
                    
                    使用配置文件配置 Bean 的方法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="profile-maven.html">
            
                <a href="profile-maven.html">
            
                    
                        <b>1.7.</b>
                    
                    Profiles + Maven 不同环境读取不同配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="profile-practice.html">
            
                <a href="profile-practice.html">
            
                    
                        <b>1.8.</b>
                    
                    Springboot 中 Profiles 最佳实践
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Logging</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="Add color to eclipse console output by log level.html">
            
                <a href="Add color to eclipse console output by log level.html">
            
                    
                        <b>2.1.</b>
                    
                    不同的日志级别展示不同的颜色
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="Spring Boot Log Configuration.html">
            
                <a href="Spring Boot Log Configuration.html">
            
                    
                        <b>2.2.</b>
                    
                    日志的配置
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Web</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="Using Velocity as Template Engine.html">
            
                <a href="Using Velocity as Template Engine.html">
            
                    
                        <b>3.1.</b>
                    
                    使用 Velocity
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="Using FreeMaker as Template Engine.html">
            
                <a href="Using FreeMaker as Template Engine.html">
            
                    
                        <b>3.2.</b>
                    
                    使用 FreeMaker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="WebMvcConfig.html">
            
                <a href="WebMvcConfig.html">
            
                    
                        <b>3.3.</b>
                    
                    Spring MVC 的配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="Error Handling.html">
            
                <a href="Error Handling.html">
            
                    
                        <b>3.4.</b>
                    
                    Spring MVC 中优雅的异常和错误处理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="Custom Favicon.html">
            
                <a href="Custom Favicon.html">
            
                    
                        <b>3.5.</b>
                    
                    如何定制 Favicon
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="Custom Return Format.html">
            
                <a href="Custom Return Format.html">
            
                    
                        <b>3.6.</b>
                    
                    指定 @ResponseBody 的返回格式(Json or XML)
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Database</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="Using Database.html">
            
                <a href="Using Database.html">
            
                    
                        <b>4.1.</b>
                    
                    数据库使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="About JDBC.html">
            
                <a href="About JDBC.html">
            
                    
                        <b>4.2.</b>
                    
                    关于 JDBC 的基础知识
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="Talking About ORM.html">
            
                <a href="Talking About ORM.html">
            
                    
                        <b>4.3.</b>
                    
                    对 ORM 框架的简单介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="Mybatis-Springboot-Starter.html">
            
                <a href="Mybatis-Springboot-Starter.html">
            
                    
                        <b>4.4.</b>
                    
                    通过 MyBatis-Spring-Boot-Starter 使用 Mybatis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="Mybatis-Common-Mapper.html">
            
                <a href="Mybatis-Common-Mapper.html">
            
                    
                        <b>4.5.</b>
                    
                    通过 Mybatis Common Mapper 使用通用 Mapper
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="Use PageHelper.html">
            
                <a href="Use PageHelper.html">
            
                    
                        <b>4.6.</b>
                    
                    分页插件 PageHelper 使用 & 打印 sql 及运行时间
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="Spring Data JPA.html">
            
                <a href="Spring Data JPA.html">
            
                    
                        <b>4.7.</b>
                    
                    Spring Data JPA 介绍
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Cache</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="cache/cache-0-introduction.html">
            
                <a href="cache/cache-0-introduction.html">
            
                    
                        <b>5.1.</b>
                    
                    Cache Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="cache/cache-1-usage.html">
            
                <a href="cache/cache-1-usage.html">
            
                    
                        <b>5.2.</b>
                    
                    Cache Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="cache/cache-2-caffeine.html">
            
                <a href="cache/cache-2-caffeine.html">
            
                    
                        <b>5.3.</b>
                    
                    Caffeine Cache
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="cache/cache-3-redis.html">
            
                <a href="cache/cache-3-redis.html">
            
                    
                        <b>5.4.</b>
                    
                    分布式缓存 - Redis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="cache/cache-9-interview.html">
            
                <a href="cache/cache-9-interview.html">
            
                    
                        <b>5.5.</b>
                    
                    Summary
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Timer & Schedule</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="Java Schedule.html">
            
                <a href="Java Schedule.html">
            
                    
                        <b>6.1.</b>
                    
                    Java 定时任务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="Timer.html">
            
                <a href="Timer.html">
            
                    
                        <b>6.2.</b>
                    
                    Java Timer & TimerTask
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="Spring Schedule.html">
            
                <a href="Spring Schedule.html">
            
                    
                        <b>6.3.</b>
                    
                    Spring Schedule
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="Quartz Introduction.html">
            
                <a href="Quartz Introduction.html">
            
                    
                        <b>6.4.</b>
                    
                    Quartz 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="quartz springboot.html">
            
                <a href="quartz springboot.html">
            
                    
                        <b>6.5.</b>
                    
                    Spring Boot 集成 Quartz
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Deploy</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="Spring Boot Deploy.html">
            
                <a href="Spring Boot Deploy.html">
            
                    
                        <b>7.1.</b>
                    
                    构建部署可执行 jar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="springboot_war.html">
            
                <a href="springboot_war.html">
            
                    
                        <b>7.2.</b>
                    
                    构建 war 包部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="basic_jdk_version.html">
            
                <a href="basic_jdk_version.html">
            
                    
                        <b>7.3.</b>
                    
                    打包指定 JDK 编译版本
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Others</li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="Spring Events.html">
            
                <a href="Spring Events.html">
            
                    
                        <b>8.1.</b>
                    
                    Spring Events 事件机制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="Spring Conditional Annotation.html">
            
                <a href="Spring Conditional Annotation.html">
            
                    
                        <b>8.2.</b>
                    
                    Spring @Conditional Annotation
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="8.3" data-path="Using RestTemplate.html">
            
                <a href="Using RestTemplate.html">
            
                    
                        <b>8.3.</b>
                    
                    使用 RestTemplate 调用 RESTful 接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.4" data-path="JavaMailSender.html">
            
                <a href="JavaMailSender.html">
            
                    
                        <b>8.4.</b>
                    
                    使用 JavaMail 发送邮件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.5" data-path="CORS.html">
            
                <a href="CORS.html">
            
                    
                        <b>8.5.</b>
                    
                    跨域资源共享 CORS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.6" data-path="IntelliJ-IDEA.html">
            
                <a href="IntelliJ-IDEA.html">
            
                    
                        <b>8.6.</b>
                    
                    IntelliJ IDEA 使用技巧
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Frontend</li>
        
        
    
        <li class="chapter " data-level="9.1" data-path="frontend-locale.html">
            
                <a href="frontend-locale.html">
            
                    
                        <b>9.1.</b>
                    
                    Springboot + FreeMarker 国际化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="frontend-jquery-categories.html">
            
                <a href="frontend-jquery-categories.html">
            
                    
                        <b>9.2.</b>
                    
                    jQuery 三级联动下拉框实现
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >使用 RestTemplate 调用 RESTful 接口</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="resttemplate&#x4ECB;&#x7ECD;">RestTemplate&#x4ECB;&#x7ECD;</h1>
<hr>
<p>spring&#x6846;&#x67B6;&#x63D0;&#x4F9B;&#x7684;RestTemplate&#x7C7B;&#x53EF;&#x7528;&#x4E8E;&#x5728;&#x5E94;&#x7528;&#x4E2D;&#x8C03;&#x7528;rest&#x670D;&#x52A1;&#xFF0C;&#x5B83;&#x7B80;&#x5316;&#x4E86;&#x4E0E;http&#x670D;&#x52A1;&#x7684;&#x901A;&#x4FE1;&#x65B9;&#x5F0F;&#xFF0C;&#x7EDF;&#x4E00;&#x4E86;RESTful&#x7684;&#x6807;&#x51C6;&#xFF0C;&#x5C01;&#x88C5;&#x4E86;http&#x94FE;&#x63A5;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x4F20;&#x5165;url&#x53CA;&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;&#x5373;&#x53EF;&#x3002;&#x76F8;&#x8F83;&#x4E8E;&#x4E4B;&#x524D;&#x5E38;&#x7528;&#x7684;httpClient&#xFF0C;RestTemplate&#x662F;&#x4E00;&#x79CD;&#x66F4;&#x4F18;&#x96C5;&#x7684;&#x8C03;&#x7528;RESTful&#x670D;&#x52A1;&#x7684;&#x65B9;&#x5F0F;&#x3002;</p>
<p>RestTemplate&#x9ED8;&#x8BA4;&#x4F9D;&#x8D56;JDK&#x63D0;&#x4F9B;http&#x8FDE;&#x63A5;&#x7684;&#x80FD;&#x529B;&#xFF08;HttpURLConnection&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x9700;&#x8981;&#x7684;&#x8BDD;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>setRequestFactory</code>&#x65B9;&#x6CD5;&#x66FF;&#x6362;&#x4E3A;&#x4F8B;&#x5982;<code>Apache HttpComponents</code>&#x3001;<code>Netty</code>&#x6216;<code>OkHttp</code>&#x7B49;&#x5176;&#x5B83;HTTP library&#x3002;</p>
<h2 id="resttemplate&#x4F7F;&#x7528;">RestTemplate&#x4F7F;&#x7528;</h2>
<h3 id="&#x76F4;&#x63A5;&#x4F7F;&#x7528;">&#x76F4;&#x63A5;&#x4F7F;&#x7528;</h3>
<p><code>RestTemplateTest.java</code></p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RestTemplateTest</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
        RestTemplate restT = <span class="hljs-keyword">new</span> RestTemplate();
        <span class="hljs-comment">//&#x901A;&#x8FC7;Jackson JSON processing library&#x76F4;&#x63A5;&#x5C06;&#x8FD4;&#x56DE;&#x503C;&#x7ED1;&#x5B9A;&#x5230;&#x5BF9;&#x8C61;</span>
        Quote quote = restT.getForObject(<span class="hljs-string">&quot;http://gturnquist-quoters.cfapps.io/api/random&quot;</span>, Quote.class);  
        String quoteString = restT.getForObject(<span class="hljs-string">&quot;http://gturnquist-quoters.cfapps.io/api/random&quot;</span>, String.class);
        System.out.println(quoteString);
    }
}
</code></pre>
<blockquote>
<p>Because the Jackson JSON processing library is in the classpath, RestTemplate will use it (via a message converter) to convert the incoming JSON data into a Quote object.</p>
</blockquote>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x53EF;&#x4EE5;&#x5C06;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x653E;&#x5728;&#x4E00;&#x4E2A;String&#x5BF9;&#x8C61;&#x4E2D;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7ED1;&#x5B9A;&#x5230;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5BF9;&#x8C61;&#x4E0A;&#xFF0C;&#x5176;&#x4E2D;Quote&#x5982;&#x4E0B;&#xFF1A;</p>
<p><code>Quote.java</code></p>
<pre><code class="lang-java"><span class="hljs-meta">@JsonIgnoreProperties</span>(ignoreUnknown = <span class="hljs-keyword">true</span>) <span class="hljs-comment">// indicate that any properties not bound in this type should be ignored.</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Quote</span> </span>{

    <span class="hljs-keyword">private</span> String type;
    <span class="hljs-keyword">private</span> Value value;

    <span class="hljs-comment">//getters &amp; setters</span>
}
</code></pre>
<p>&#x8FD9;&#x91CC;&#x6709;&#x5982;&#x4E0B;&#x4E24;&#x70B9;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF08;&#x61D2;&#x5F97;&#x7FFB;&#x8BD1;&#xFF09;&#xFF0C;@JsonIgnoreProperties&#x5982;&#x679C;&#x5B9A;&#x4E49;&#x4E86;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x4E2D;&#x6CA1;&#x6709;&#x7684;&#x5C5E;&#x6027;&#x5219;&#x5FFD;&#x7565;&#xFF0C;&#x53E6;&#x5916;&#x5C5E;&#x6027;&#x540D;&#x9700;&#x8981;&#x548C;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x7684;&#x5C5E;&#x6027;&#x540D;&#x4E00;&#x81F4;&#xFF0C;&#x5426;&#x5219;&#x9700;&#x8981;&#x4F7F;&#x7528;@JsonProperty&#x6CE8;&#x89E3;&#x8FDB;&#x884C;&#x5339;&#x914D;&#x3002;</p>
<ul>
<li>It&#x2019;s annotated with @JsonIgnoreProperties from the Jackson JSON processing library to indicate that any properties not bound in this type should be ignored.</li>
<li>In order for you to directly bind your data to your custom types, you need to specify the variable name exact same as the key in the JSON Document returned from the API. In case your variable name and key in JSON doc are not matching, you need to use @JsonProperty annotation to specify the exact key of JSON document.</li>
</ul>
<h3 id="&#x5728;spring-boot&#x4E2D;&#x4F7F;&#x7528;resttemplate">&#x5728;Spring boot&#x4E2D;&#x4F7F;&#x7528;RestTemplate</h3>
<p><code>application.java</code></p>
<pre><code class="lang-java"><span class="hljs-meta">@SpringBootApplication</span> 
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloSpringBoot</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
        SpringApplication.run(HelloWorld.class, args);
    }

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title">restTemplate</span><span class="hljs-params">(RestTemplateBuilder builder)</span> </span>{
        <span class="hljs-keyword">return</span> builder.build();
    }    
}
</code></pre>
<p>&#x6CE8;&#x610F;spring boot&#x5E76;&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x88C5;&#x914D;<code>RestTemplate</code>&#x7C7B;&#xFF0C;&#x56E0;&#x4E3A;&#x901A;&#x5E38;&#x7528;&#x6237;&#x90FD;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5B9A;&#x5236;&#x7684;RestTemplate&#xFF0C;&#x56E0;&#x6B64;springboot&#x81EA;&#x52A8;&#x88C5;&#x914D;&#x4E86;&#x4E00;&#x4E2A;<code>RestTemplateBuilder</code>&#x7C7B;&#x65B9;&#x4FBF;&#x7528;&#x6237;&#x5B9A;&#x5236;&#x521B;&#x5EFA;&#x81EA;&#x5DF1;&#x7684;RestTemplate&#x7C7B;&#x3002;</p>
<blockquote>
<p>Since RestTemplate instances often need to be customized before being used, Spring Boot does not provide any single auto-configured RestTemplate bean. It does, however, auto-configure a RestTemplateBuilder which can be used to create RestTemplate instances when needed. The auto-configured RestTemplateBuilder will ensure that sensible HttpMessageConverters are applied to RestTemplate instances.</p>
</blockquote>
<p><code>RestTemplateService.java</code></p>
<pre><code class="lang-java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RestTemplateService</span> </span>{
    <span class="hljs-meta">@Autowired</span> RestTemplate restTemplate;

    <span class="hljs-function"><span class="hljs-keyword">public</span> Quote <span class="hljs-title">someRestCall</span><span class="hljs-params">()</span></span>{
        <span class="hljs-keyword">return</span> restTemplate.getForObject(<span class="hljs-string">&quot;http://gturnquist-quoters.cfapps.io/api/random&quot;</span>, Quote.class);
    }    
}
</code></pre>
<p><code>RestTemplateController.java</code></p>
<pre><code class="lang-java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">&quot;/api/rest&quot;</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RestTemplateController</span> </span>{
    <span class="hljs-meta">@Autowired</span> 
    <span class="hljs-keyword">private</span> RestTemplateService restTemplateService;

    <span class="hljs-meta">@RequestMapping</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">index</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> restTemplateService.someRestCall();
    }
}
</code></pre>
<p>&#x8FD9;&#x662F;&#x8BBF;&#x95EE;<code>http://localhost/api/rest</code>&#x8FD4;&#x56DE;&#x4EE5;&#x4E0B;&#x7ED3;&#x679C;&#xFF1A;</p>
<pre><code class="lang-json">{
<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;success&quot;</span>,
<span class="hljs-string">&quot;value&quot;</span>: {
    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">9</span>,
    <span class="hljs-string">&quot;quote&quot;</span>: <span class="hljs-string">&quot;So easy it is to switch container in #springboot.&quot;</span>
    }
}
</code></pre>
<blockquote>
<p> <code>http://gturnquist-quoters.cfapps.io/api/random</code> is a RESTful service that randomly fetches quotes about Spring Boot and returns them as a JSON document.</p>
</blockquote>
<h2 id="resttemplate&#x5B9A;&#x5236;">RestTemplate&#x5B9A;&#x5236;</h2>
<p>&#x7531;&#x4E8E;&#x4E0D;&#x540C;&#x7684;rest&#x670D;&#x52A1;&#x8C03;&#x7528;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x4E0D;&#x540C;&#x7684;RestTemplate&#x914D;&#x7F6E;&#xFF0C;&#x6839;&#x636E;&#x9002;&#x7528;&#x8303;&#x56F4;&#x901A;&#x5E38;&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x914D;&#x7F6E;&#x3002;</p>
<p>&#x4E00;&#x3001;&#x5355;&#x7C7B;&#x5B9A;&#x5236;</p>
<p><code>RestTemplateService.java</code></p>
<pre><code class="lang-java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RestTemplateService</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RestTemplate restTemplate;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">RestTemplateService</span><span class="hljs-params">(RestTemplateBuilder builder)</span></span>{  <span class="hljs-comment">//RestTemplateBuilder will be auto-configured</span>
        <span class="hljs-keyword">this</span>.restTemplate = builder.setConnectTimeout(<span class="hljs-number">1000</span>).setReadTimeout(<span class="hljs-number">1000</span>).build();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> Quote <span class="hljs-title">someRestCall</span><span class="hljs-params">()</span></span>{
        <span class="hljs-keyword">return</span> restTemplate.getForObject(<span class="hljs-string">&quot;http://gturnquist-quoters.cfapps.io/api/random&quot;</span>, Quote.class);
    }    
}
</code></pre>
<p>&#x4E8C;&#x3001;&#x8DE8;&#x7C7B;&#x5B9A;&#x5236;</p>
<p><code>BeanConf.class</code></p>
<pre><code class="lang-java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BeanConf</span> </span>{

    <span class="hljs-meta">@Bean</span>(name = <span class="hljs-string">&quot;restTemplateA&quot;</span>)
    <span class="hljs-function"><span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title">restTemplateA</span><span class="hljs-params">(RestTemplateBuilder builder)</span> </span>{
        <span class="hljs-keyword">return</span> builder.basicAuthorization(<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;password&quot;</span>)  
            .setConnectTimeout(<span class="hljs-number">3000</span>)  
            .setReadTimeout(<span class="hljs-number">5000</span>)  
            .rootUri(<span class="hljs-string">&quot;http://api1.example.com/&quot;</span>)  
            .errorHandler(<span class="hljs-keyword">new</span> CustomResponseErrorHandler())  
            .additionalMessageConverters(<span class="hljs-keyword">new</span> CustomHttpMessageConverter())  
            .uriTemplateHandler(<span class="hljs-keyword">new</span> OkHttp3ClientHttpRequestFactory())  
            .build();
    }

    <span class="hljs-meta">@Bean</span>(name = <span class="hljs-string">&quot;restTemplateB&quot;</span>)
    <span class="hljs-function"><span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title">restTemplateB</span><span class="hljs-params">(RestTemplateBuilder builder)</span> </span>{
        <span class="hljs-keyword">return</span> builder.basicAuthorization(<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;password&quot;</span>)  
            .setConnectTimeout(<span class="hljs-number">1000</span>)  
            .setReadTimeout(<span class="hljs-number">1000</span>)  
            .rootUri(<span class="hljs-string">&quot;http://api2.example.com/&quot;</span>)  
            .errorHandler(<span class="hljs-keyword">new</span> CustomResponseErrorHandler())  
            .additionalMessageConverters(<span class="hljs-keyword">new</span> CustomHttpMessageConverter())  
            .uriTemplateHandler(<span class="hljs-keyword">new</span> OkHttp3ClientHttpRequestFactory())  
            .build();
    }
}
</code></pre>
<p><code>RestTemplateService.java</code></p>
<pre><code class="lang-java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RestTemplateService</span> </span>{
    <span class="hljs-meta">@Resource</span>(name = <span class="hljs-string">&quot;restTemplateB&quot;</span>)
    <span class="hljs-keyword">private</span> RestTemplate restTemplate;

    <span class="hljs-function"><span class="hljs-keyword">public</span> Quote <span class="hljs-title">someRestCall</span><span class="hljs-params">()</span></span>{
        <span class="hljs-keyword">return</span> restTemplate.getForObject(<span class="hljs-string">&quot;http://gturnquist-quoters.cfapps.io/api/random&quot;</span>, Quote.class);
    }
}
</code></pre>
<p>&#x4E09;&#x3001;&#x5E94;&#x7528;&#x5185;&#x5B9A;&#x5236;</p>
<p>&#x901A;&#x8FC7;&#x5B9E;&#x73B0;<code>RestTemplateCustomizer</code>&#x63A5;&#x53E3;&#xFF0C;&#x5176;&#x4E2D;&#x7684;&#x8BBE;&#x7F6E;&#x5728;&#x6240;&#x6709;&#x901A;&#x8FC7;<code>RestTemplateBuilder</code>&#x521B;&#x5EFA;&#x7684;RestTemplate&#x90FD;&#x5C06;&#x751F;&#x6548;&#x3002;</p>
<pre><code class="lang-java"><span class="hljs-meta">@Component</span>  
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomRestTemplateCustomizer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">RestTemplateCustomizer</span> </span>{  
    <span class="hljs-meta">@Override</span>  
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">customize</span><span class="hljs-params">(RestTemplate restTemplate)</span> </span>{  
        <span class="hljs-keyword">new</span> RestTemplateBuilder()  
                .detectRequestFactory(<span class="hljs-keyword">false</span>)  
                .basicAuthorization(<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;password&quot;</span>)  
                .uriTemplateHandler(<span class="hljs-keyword">new</span> OkHttp3ClientHttpRequestFactory())  
                .errorHandler(<span class="hljs-keyword">new</span> CustomResponseErrorHandler())  
                .configure(restTemplate);  
    }  
}
</code></pre>
<h2 id="http&#x8FDE;&#x63A5;&#x6C60;">http&#x8FDE;&#x63A5;&#x6C60;</h2>
<blockquote>
<p>By default RestTemplate creates new Httpconnection every time and closes the connection once done.If you need to have a connection pooling under rest template then you may use different implementation of the ClientHttpRequestFactory that pools the connections.</p>
</blockquote>
<p>RestTemplate&#x9ED8;&#x8BA4;&#x4E0D;&#x4F7F;&#x7528;&#x8FDE;&#x63A5;&#x6C60;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x4F7F;&#x7528;&#x5219;&#x9700;&#x8981;&#x4E00;&#x4E2A;<code>ClientHttpRequestFactory</code>&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x6765;&#x6C60;&#x5316;&#x8FDE;&#x63A5;&#x3002;&#x4F8B;&#x5982;&#x4F7F;&#x7528;<code>HttpComponentsClientHttpRequestFactory</code>&#x3002;</p>
<pre><code class="lang-java">RestTemplate restT = <span class="hljs-keyword">new</span> RestTemplate(<span class="hljs-keyword">new</span> HttpComponentsClientHttpRequestFactory());
</code></pre>
<p>&#x6CE8;&#x610F;<code>HttpComponentsClientHttpRequestFactory</code> &#x662F; <code>org.springframework.http.client.ClientHttpRequestFactory</code>&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x5B83;&#x5E95;&#x5C42;&#x4F7F;&#x7528;&#x4E86;<a href="http://hc.apache.org/httpcomponents-client-ga/" target="_blank">Apache HttpComponents HttpClient</a> to create requests.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://docs.spring.io/spring-boot/docs/1.5.4.RELEASE/reference/htmlsingle/#boot-features-restclient" target="_blank">spring-boot docs Calling REST services</a></li>
<li><a href="https://github.com/spring-guides/gs-consuming-rest" target="_blank">an application that uses Spring&#x2019;s RestTemplate to retrieve a random Spring Boot quotation</a></li>
<li><a href="https://spring.io/guides/gs/consuming-rest/" target="_blank">Consuming a RESTful Web Service</a> </li>
</ul>
<footer class="page-footer"><span class="copyright">Copyright &#xA9; jverson.com 2018 all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">File Modify: 
2018-08-25 00:18:13
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Spring Conditional Annotation.html" class="navigation navigation-prev " aria-label="Previous page: Spring @Conditional Annotation">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="JavaMailSender.html" class="navigation navigation-next " aria-label="Next page: 使用 JavaMail 发送邮件">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"使用 RestTemplate 调用 RESTful 接口","level":"8.3","depth":1,"next":{"title":"使用 JavaMail 发送邮件","level":"8.4","depth":1,"path":"JavaMailSender.md","ref":"JavaMailSender.md","articles":[]},"previous":{"title":"Spring @Conditional Annotation","level":"8.2","depth":1,"path":"Spring Conditional Annotation.md","ref":"Spring Conditional Annotation.md","articles":[]},"dir":"ltr"},"config":{"plugins":["github","github-buttons","disqus","todo","splitter","tbfed-pagefooter","page-toc-button","-sharing"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright © jverson.com 2018"},"disqus":{"useIdentifier":false,"shortName":"jverson"},"github":{"url":"https://github.com/jiwenxing/spring-boot-demo"},"todo":{},"splitter":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"page-toc-button":{"maxTocDepth":2,"minTocSize":2},"github-buttons":{"buttons":[{"user":"jiwenxing","repo":"spring-boot-demo","type":"star","size":"small","count":true},{"user":"jiwenxing","repo":"spring-boot-demo","type":"fork","size":"small","count":true}]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true}},"theme":"default","author":"Jverson <i@jverson.com>","pdf":{"pageBreaksBefore":"/","headerTemplate":null,"paperSize":"a4","margin":{"right":62,"left":62,"top":36,"bottom":36},"fontSize":12,"fontFamily":"Arial","footerTemplate":null,"chapterMark":"pagebreak","pageNumbers":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"isbn":"","variables":{},"title":"Spring Boot","links":{"sharing":{"all":null,"facebook":null,"google":null,"twitter":null,"weibo":null},"sidebar":{"Jverson's Blog":"https://jverson.com"}},"gitbook":"*","description":"Spring Boot Practise & Notes","extension":null},"file":{"path":"Using RestTemplate.md","mtime":"2018-08-24T16:18:13.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-08-09T13:39:08.889Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-disqus/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-page-toc-button/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

